<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Software Development Ramblings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/pure-min.css" type="text/css">
  <link rel="stylesheet" href="/css/biture.css" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

</head>


<body>
  <header id="header">
    <div class="wrap">
  <div class="inner">
    <a class="brand" href="/">Software Development Ramblings</a>
    <a id="menu-toggle" href="#"><i class="fa fa-bars"></i></a>
<ul class="nav-menu">

</ul>

<ul class="nav-menu ext-menu">


    <li><a href="//github.com/pbuda/">github</a></li>



    <li><a href="//twitter.com/piotrbuda">twitter</a></li>



    <li><a href="//pl.linkedin.com/in/piotrbuda">linked-in</a></li>



    <li><a href="//feeds.feedburner.com/SoftwareDevelopmentRamblings">rss</a></li>


  <li><a class="various" href="#fbox-tagcloud">tags</a></li>
</ul>
</div>

  </div>
</div>

<div class="tagcloud" id="fbox-tagcloud" style="margin:10px; display:none; overflow: hidden"><a href="/tags/actors/" style="font-size: 12px;">actors</a><a href="/tags/api/" style="font-size: 12px;">api</a><a href="/tags/capabilities/" style="font-size: 24px;">capabilities</a><a href="/tags/cloud/" style="font-size: 12px;">cloud</a><a href="/tags/concurrency/" style="font-size: 24px;">concurrency</a><a href="/tags/defaults/" style="font-size: 12px;">defaults</a><a href="/tags/google-play/" style="font-size: 12px;">google play</a><a href="/tags/openshift/" style="font-size: 12px;">openshift</a><a href="/tags/play/" style="font-size: 12px;">play</a><a href="/tags/play-store-api/" style="font-size: 12px;">play store api</a><a href="/tags/pony/" style="font-size: 12px;">pony</a><a href="/tags/pony-lang/" style="font-size: 12px;">pony lang</a><a href="/tags/sbt/" style="font-size: 12px;">sbt</a><a href="/tags/scala/" style="font-size: 24px;">scala</a><a href="/tags/spray/" style="font-size: 12px;">spray</a><a href="/tags/store/" style="font-size: 12px;">store</a><a href="/tags/websocket/" style="font-size: 12px;">websocket</a></div>

  </header>
  <div id="main-content" class="wrap">
  <div class="inner">
    
  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2015-07-01T11:10:20.000Z">
        <div class="day">1</div>
        <div class="month">Jul 2015</div>
      </time></div>
      <div class="article-tags">
        

      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2015/07/intellij-plugin-to-support-pony.html">ponylang-intellij-plugin</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <p>I’m a Java/Scala developer and I am used to Intellij Idea for my work. When I started my interest in Pony, I used Sublime Text for a short while and then switched to Atom for code highlighting. But what I miss<br>in both these tools are all the information that Intellij provides - code completion, inspection, refactoring, analysis.</p>
<p>I decided to start my own Intellij plugin to support Pony language on that platform. There is a <a href="http://www.jetbrains.org/intellij/sdk/docs/index.html" target="_blank" rel="external">nice tutorial</a> on adding new language support for Intellij so I started with the basics and hit a wall. This tutorial mentions using the GrammarKit plugin which generates a lot of boilerplate from BNF grammars. The issue I had was that the grammar file in Pony repository was Antlr v3 grammar and I spent a few days investigating how to convert one to another. After some unsuccessful attempts I had to postpone work on this little project.</p>
<p>Today I was playing with Pony and noticed this small line in the output of <code>ponyc --help</code> - <code>--bnf Print out the Pony grammar as human readable BNF.</code> I was shocked - I don’t know when this was implemented (current Pony version is 0.1.7) but it saves the plugin development! It still wasn’t the format expected by GrammarKit plugin but it was very easy to adapt. After a few moments I had a grammar file with generated tokens and all stuff required by the parser!</p>
<p>That’s just one small step towards the first version of the plugin. The features I’d like to have in the very first published version are: syntax highlighting, pony files support, run configuration to build the project.<br>This would allow people to start developing Pony applications from within Intellij. There’s still a lot of work to do, so any help is appreciated. The project is located in <a href="https://github.com/pbuda/intellij-pony" target="_blank" rel="external">this GitHub repository</a>. Fork away!</p>

        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>


  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2015-06-30T11:18:20.000Z">
        <div class="day">30</div>
        <div class="month">Jun 2015</div>
      </time></div>
      <div class="article-tags">
        
  
    <a href='/tags/capabilities/' class='pure-button pull-right' style='margin:3px;'>capabilities</a>
  
    <a href='/tags/concurrency/' class='pure-button pull-right' style='margin:3px;'>concurrency</a>
  
    <a href='/tags/defaults/' class='pure-button pull-right' style='margin:3px;'>defaults</a>
  
    <a href='/tags/pony/' class='pure-button pull-right' style='margin:3px;'>pony</a>
  


      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2015/06/pony-lang-capabilities-understanding-defaults.html">Pony lang capabilities - understanding the defaults</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <p>Pony offers concurrency programming using actors. However safe concurrency is hard. In order to make it safe, you have to remember about a few things. First of all, passing mutable data is hard, because concurrent reading and writing to that data can lead to garbage being store, or overwritten state. So concurrent programs have to employ safety mechanisms (such as locks, semaphores) to work with mutable data. However it’s error prone and introduces overhead, not to mention performance impact. <a href="http://tutorial.ponylang.org/capabilities/introduction/">Pony tutorial</a> on capabilities mentions two ways of sharing data between actors - sharing immutable data and passing isolated data.</p>
<p>Sharing immutable data is safe, because once created this data cannot be modified. Think of sharing as moving reference to data around, leaving a trace of it everywhere you want. Isolated data (data for which only one reference exists) is safe, because only one actor can have reference to that data and changing mutable data in one actor is perfectly ok. So passing means that you pass the reference to someone else and don’t store it anymore.</p>
<p>Pony compiler can perform checks whether your program only shares immutable data or is passing isolated data. To achieve that, Pony introduces a mechanism called capabilities which makes some guarantees about sharing objects with other actors. These guarantees then allow the Pony compiler to check for errors in your code and whether your concurrent app will be safe. At first I found this topic to be confusing so I decided to write a post about it and maybe you, the reader, will have easier time understanding this concept.</p>
          <a href="http://www.piotrbuda.me/2015/06/pony-lang-capabilities-understanding-defaults.html">Read More</a>
        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>


  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2015-05-13T22:00:00.000Z">
        <div class="day">14</div>
        <div class="month">May 2015</div>
      </time></div>
      <div class="article-tags">
        
  
    <a href='/tags/actors/' class='pure-button pull-right' style='margin:3px;'>actors</a>
  
    <a href='/tags/capabilities/' class='pure-button pull-right' style='margin:3px;'>capabilities</a>
  
    <a href='/tags/concurrency/' class='pure-button pull-right' style='margin:3px;'>concurrency</a>
  
    <a href='/tags/pony-lang/' class='pure-button pull-right' style='margin:3px;'>pony lang</a>
  


      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2015/05/implementing-chat-application-with-pony-lang.html">Implementing chat application with Pony lang</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <p>Recently on Hacker News I spotted a post on a new object-oriented, actor-model programming language called <a href="http://ponylang.org/">Pony</a>. Given it is pretty new (as of this post the current version is 0.1.3) I decided to give it a try and hack a little.</p>
<p>I’ve went through a tutorial that is available at <a href="http://tutorial.ponylang.org/">Pony’s site</a> and found the language to be pretty interesting, so I decided to implement my first simple application - a chat. I think it will allow me to experiment with a few language features and will be enough for a start with the new language. I’d like to share with you what I created and give you some introduction to the language. I will also try to explain a few things on the way but please remember that explaining everything in detail is impossible in one post, hence more will come :)</p>
<p>The architecture of this application will be pretty simple. We’ll have a server, that will manage user sessions and a client that will login to the server and post messages to it. After each message is posted the chat log will be displayed on the screen. For starters the whole application will be hardcoded, without remote calls and such - time will come to implement that too :) (I don’t think there are remote actors in Pony yet!)</p>
          <a href="http://www.piotrbuda.me/2015/05/implementing-chat-application-with-pony-lang.html">Read More</a>
        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>


  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2013-05-22T12:00:00.000Z">
        <div class="day">22</div>
        <div class="month">May 2013</div>
      </time></div>
      <div class="article-tags">
        

      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2013/05/microsoft-natural-ergonomic-keyboard-4000.html">Microsoft Natural Ergonomic Keyboard 4000</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <p>I’ve been using computers for almost 28 years now (yes, my first ever computer was ZX Spectrum when I was 3) and thoughout that time I was always using traditional keyboards. Some of them were better, some of them were worse, but I never thought about all those fancy ‘flat’, waved or ergonomic keyboards. That changed recently as I got a nice and shiny Macbook Pro.<br>
          <a href="http://www.piotrbuda.me/2013/05/microsoft-natural-ergonomic-keyboard-4000.html">Read More</a>
        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>


  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2013-04-24T14:45:00.000Z">
        <div class="day">24</div>
        <div class="month">Apr 2013</div>
      </time></div>
      <div class="article-tags">
        
  
    <a href='/tags/scala/' class='pure-button pull-right' style='margin:3px;'>scala</a>
  
    <a href='/tags/websocket/' class='pure-button pull-right' style='margin:3px;'>websocket</a>
  


      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2013/04/scalawebsocket.html">ScalaWebSocket</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <h3 id="ScalaWebSocket">ScalaWebSocket</h3><p>On April 21st I pushed the <a href="https://github.com/pbuda/scalawebsocket" target="_blank" rel="external">ScalaWebSocket</a> library to GitHub. But what is it? As the name suggests, it’s WebSockets for Scala.</p>
<p>There are already a few implementations of WebSocket for Java, there is also the Scala project called <a href="https://github.com/jfarcand/WCS" target="_blank" rel="external">wCS</a> but all of them support Javaish style of passing the anonymous implementations of some kind of Listener interface. I didn’t want that as I prefer the functional style of handlers.</p>
<p>ScalaWebSocket is a thin wrapper around <a href="https://github.com/AsyncHttpClient/async-http-client" target="_blank" rel="external">async-http-client</a> and it exposes a more Scala-like vocabulary to interact with WebSockets.</p>
<h3 id="Installation">Installation</h3><p>To start using it in your project</p>
<figure class="highlight mel"><figcaption><span>Dependency in SBT</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libraryDependncies += <span class="string">"eu.piotrbuda"</span> <span class="variable">%%</span> <span class="string">"scalawebsocket"</span> % <span class="string">"0.1.0"</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><figcaption><span>Dependency in Maven</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">groupId</span>&gt;</span>eu.piotrbuda<span class="tag">&lt;/<span class="title">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">artifactId</span>&gt;</span>scalawebsocket_2.10<span class="tag">&lt;/<span class="title">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">version</span>&gt;</span>0.1.0<span class="tag">&lt;/<span class="title">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Examples">Examples</h3><p>Usage of this library is very simple.</p>
<figure class="highlight scala"><figcaption><span>Open a WebSocket connection</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">WebSocket</span>().open(<span class="string">"ws://echo.websocket.org/"</span>).sendText(<span class="string">"text"</span>).close().shutdown()</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><figcaption><span>Listen for text messages</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">WebSocket</span>().open(<span class="string">"ws://echo.websocket.org/"</span>)</span><br><span class="line">.onTextMessage(msg =&gt; doSomethingWithMessage(msg))</span><br></pre></td></tr></table></figure>
<figure class="highlight scala"><figcaption><span>Add several listeners</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">WebSocket</span>().open(<span class="string">"ws://echo.websocket.org/"</span>)</span><br><span class="line">.onTextMessage(msg =&gt; doSomethingWithMessage(msg))</span><br><span class="line">.onBinaryMessage(msg =&gt; doSomethingWithBinaryMessage(msg))</span><br></pre></td></tr></table></figure>
<h3 id="Future">Future</h3><p>I need this library to talk to SocketIO servers, so in version 0.2.0 I will implement some basic support for SocketIO.<br> For now, please use it and report any issues you have. My goal for this library is to make WebSocket natural in Scala.</p>

        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>


  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2013-02-26T09:35:00.000Z">
        <div class="day">26</div>
        <div class="month">Feb 2013</div>
      </time></div>
      <div class="article-tags">
        
  
    <a href='/tags/cloud/' class='pure-button pull-right' style='margin:3px;'>cloud</a>
  
    <a href='/tags/openshift/' class='pure-button pull-right' style='margin:3px;'>openshift</a>
  
    <a href='/tags/sbt/' class='pure-button pull-right' style='margin:3px;'>sbt</a>
  
    <a href='/tags/scala/' class='pure-button pull-right' style='margin:3px;'>scala</a>
  
    <a href='/tags/spray/' class='pure-button pull-right' style='margin:3px;'>spray</a>
  


      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2013/02/trying-to-deploy-scala-app-on-openshift.html">Trying to deploy Scala app on OpenShift</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <h3 id="The_beggining">The beggining</h3><p>This is a simple log of what I have done during past few days trying to deploy a simple app to <a href="https://openshift.redhat.com/app/" target="_blank" rel="external">OpenShift</a>. I thought it would be quite easy but apparently this is beyond my knowledge. My application is a simple Hello World app. The only real requirement is that I wanted this app to compile with Scala 2.10.</p>
<h3 id="Setup">Setup</h3><p>I won’t discuss how to set up the application on <a href="https://openshift.redhat.com/app/" target="_blank" rel="external">OpenShift</a> (unless it is really needed). The only thing worth mentioning is that you will need a Do-It-Yourself type.</p>
<h3 id="SBT">SBT</h3><p>There is no <a href="http://www.scala-sbt.org/" target="_blank" rel="external">SBT</a> on <a href="https://openshift.redhat.com/app/" target="_blank" rel="external">OpenShift</a>. That’s right, you have to get it yourself. <a href="https://openshift.redhat.com/app/" target="_blank" rel="external">OpenShift</a> however provides a nice way of storing things with its data directory (available at $OPENSHIFT_DATA_DIR) and it’s action hooks are the way to go in this case. After some trial and error this is the script I came up with.<br><figure class="highlight bash"><figcaption><span>pre_build script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$OPENSHIFT_DATA_DIR</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="operator">-d</span> sbt ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"SBT installed"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  curl -o sbt.tgz http://scalasbt.artifactoryonline.com/scalasbt/sbt-native-packages/org/scala-sbt/sbt/<span class="number">0.12</span>.<span class="number">2</span>/sbt.tgz</span><br><span class="line">  tar zxvf sbt.tgz sbt</span><br><span class="line">  rm sbt.tgz</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><br>This script basically downloads SBT from its site but only if SBT folder is not present in the data directory. Then the downloaded tgz archive gets unpacked and SBT is ready to be used.</p>
<h3 id="Building">Building</h3><p>Now this is the part I spent most time with and unfortunately I can’t make it fully work :( There were several issues with building using <a href="http://www.scala-sbt.org/" target="_blank" rel="external">SBT</a>, but after some time it almost worked. Here’s the build script I developed that semi-works.<br><figure class="highlight stylus"><figcaption><span>build script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SBT_PATH=<span class="variable">$OPENSHIFT_DATA_DIR</span>/sbt</span><br><span class="line">SBT_DIR=<span class="variable">$OPENSHIFT_DATA_DIR</span>/<span class="class">.sbt</span></span><br><span class="line">IVY_DIR=<span class="variable">$OPENSHIFT_DATA_DIR</span>/<span class="class">.ivy</span></span><br><span class="line"></span><br><span class="line">cd <span class="variable">$OPENSHIFT_REPO_DIR</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$SBT_PATH</span>/bin/sbt -sbt-dir <span class="variable">$SBT_DIR</span> -ivy <span class="variable">$IVY_DIR</span> start-script</span><br></pre></td></tr></table></figure><br>This took a while to figure out. Let’s go line by line to see what everything is needed for. Lines 1, 2 and 3 define three variables that are required to run <a href="http://www.scala-sbt.org/" target="_blank" rel="external">SBT</a> (they could have been moved to pre_build script to keep everything SBT related in one place). </p>
<ul>
<li>Line 1 simply defines the path to <a href="http://www.scala-sbt.org/" target="_blank" rel="external">SBT</a> directory.</li>
<li>Line 2 is a variable with path to folder <a href="http://www.scala-sbt.org/" target="_blank" rel="external">SBT</a> uses to store its data. On <a href="https://openshift.redhat.com/app/" target="_blank" rel="external">OpenShift</a> you don’t have permission to write to your home directory, hence a need for custom dir.</li>
<li>Line 3 is like line 2 except for Ivy cache.</li>
<li>Line 5 then switches to the repository directory. This is the place where your sources reside and this is mostly the place where you should start your build at.</li>
<li>Line 7 is a simple invocation of the SBT with the predefined settings. I’m generating a start script here (using xsbt-start-script-plugin) and that’s why I only include this goal.</li>
</ul>
<p>This somewhat works. Considering the requirements we now have a project that uses Scala 2.10. But there are now two things to consider.</p>
<p>At first in pre_build I downloaded SBT 0.12.2 and in project build.settings I had SBT setup to 0.12.1. This triggered a compilation of ‘compiler-interface’.<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">remote: [info] Compiling <span class="number">1</span> Scala <span class="keyword">source</span> to <span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span><span class="keyword">runtime</span><span class="regexp">/repo/</span>target<span class="regexp">/scala-2.10/</span>classes...</span><br><span class="line">remote: [info] <span class="string">'compiler-interface'</span> not yet compiled <span class="keyword">for</span> Scala <span class="number">2.10</span>.<span class="number">0</span>. Compiling...</span><br></pre></td></tr></table></figure><br>But this failed. Compilation wouldn’t finish and the process was killed. Small fix in build.properties and upping the actual <a href="http://www.scala-sbt.org/" target="_blank" rel="external">SBT</a> version to 0.12.2 fixed this - no more recompilation of ‘compiler-interface’.</p>
<p>When you push your project to <a href="https://openshift.redhat.com/app/" target="_blank" rel="external">OpenShift</a> now, it downloads SBT, unpacks it and tries to build your project. And it fails with the same error as above.<br><figure class="highlight stata"><figcaption><span>Build fails after git push</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">remote: restart_on_add=false</span><br><span class="line">remote: stop</span><br><span class="line">remote: Done</span><br><span class="line">remote: restart_on_add=false</span><br><span class="line">remote: Running .openshift/action_hooks/pre_build</span><br><span class="line">remote: pre_build</span><br><span class="line">remote: SBT installed</span><br><span class="line">remote: Running .openshift/action_hooks/build</span><br><span class="line">remote: build</span><br><span class="line">remote: /<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/git/yatstaging2.git</span><br><span class="line">remote: /<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo</span><br><span class="line">remote: [info] Loading project definition from /<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/project</span><br><span class="line">remote: [info] Updating &#123;<span class="keyword">file</span>:/<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/project/&#125;default-2353b7...</span><br><span class="line">        [info] Resolving org.<span class="keyword">scala</span>-sbt#precompiled-2_10_0;0.12.2 ...</span><br><span class="line">remote: [info] Done updating.</span><br><span class="line">remote: [info] <span class="keyword">Set</span> current project to YAT Server (<span class="keyword">in</span> build <span class="keyword">file</span>:/<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/)</span><br><span class="line">remote: [info] Updating &#123;<span class="keyword">file</span>:/<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/&#125;default-e6271e...</span><br><span class="line">remote: [info] Resolving org.<span class="keyword">scala</span>-lang#<span class="keyword">scala</span>-library;2.10.0 ...</span><br><span class="line">remote: [info] Done updating.</span><br><span class="line">remote: [debug]</span><br><span class="line">remote: [debug] Initial source changes:</span><br><span class="line">remote: [debug]   removed:<span class="keyword">Set</span>()</span><br><span class="line">remote: [debug] 	added: <span class="keyword">Set</span>(/<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/src/main/<span class="keyword">scala</span>/<span class="keyword">pl</span>/apptile/yat/YAT.<span class="keyword">scala</span>)</span><br><span class="line">remote: [debug] 	modified: <span class="keyword">Set</span>()</span><br><span class="line">remote: [debug] Removed products: <span class="keyword">Set</span>()</span><br><span class="line">remote: [debug] Modified external sources: <span class="keyword">Set</span>()</span><br><span class="line">remote: [debug] Modified binary dependencies: <span class="keyword">Set</span>()</span><br><span class="line">remote: [debug] Initial directly invalidated sources: <span class="keyword">Set</span>(/<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/src/main/<span class="keyword">scala</span>/<span class="keyword">pl</span>/apptile/yat/YAT.<span class="keyword">scala</span>)</span><br><span class="line">remote: [debug]</span><br><span class="line">remote: [debug] Sources indirectly invalidated <span class="keyword">by</span>:</span><br><span class="line">remote: [debug] 	product: <span class="keyword">Set</span>()</span><br><span class="line">remote: [debug] 	binary dep: <span class="keyword">Set</span>()</span><br><span class="line">remote: [debug] 	external source: <span class="keyword">Set</span>()</span><br><span class="line">remote: [debug] Initially invalidated: <span class="keyword">Set</span>(/<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/src/main/<span class="keyword">scala</span>/<span class="keyword">pl</span>/apptile/yat/YAT.<span class="keyword">scala</span>)</span><br><span class="line">remote: [debug] Recompiling all 1 sources: invalidated sources (1) exceeded 50.0% of all sources</span><br><span class="line">remote: [info] Compiling 1 <span class="keyword">Scala</span> source to /<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/target/<span class="keyword">scala</span>-2.10/classes...</span><br><span class="line">remote: [debug] Running cached compiler 18d45f0, interfacing (CompilerInterface) with <span class="keyword">Scala</span> compiler <span class="keyword">version</span> 2.10.0</span><br><span class="line">remote: [debug] Calling <span class="keyword">Scala</span> compiler with arguments  (CompilerInterface):</span><br><span class="line">remote: [debug] 	-<span class="literal">d</span></span><br><span class="line">remote: [debug] 	/<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/target/<span class="keyword">scala</span>-2.10/classes</span><br><span class="line">remote: [debug] 	-bootclasspath</span><br><span class="line">remote: [debug] 	/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/resources.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/rt.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/sunrsasign.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/jsse.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/jce.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/charsets.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/netx.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/<span class="keyword">plugin</span>.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/rhino.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/lib/jfr.jar:/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.9/jre/classes:/<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/data/.sbt/<span class="keyword">boot</span>/<span class="keyword">scala</span>-2.10.0/lib/<span class="keyword">scala</span>-library.jar</span><br><span class="line">remote: [debug] 	-classpath</span><br><span class="line">remote: [debug] 	/<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/target/<span class="keyword">scala</span>-2.10/classes</span><br><span class="line">remote: /<span class="keyword">var</span>/lib/openshift/512617424382ec272a0000b1/<span class="keyword">app</span>-root/runtime/repo/.openshift/action_hooks/build: <span class="keyword">line</span> 21:  7042 Killed            <span class="label">$SBT_PATH</span>/bin/sbt -sbt-<span class="keyword">dir</span> <span class="label">$SBT_DIR</span> -ivy <span class="label">$IVY_DIR</span> start-script</span><br><span class="line">remote: Running .openshift/action_hooks/deploy</span><br><span class="line">remote: deploy</span><br><span class="line">remote: hot_deploy_added=false</span><br><span class="line">remote: start</span><br><span class="line">remote: Done</span><br><span class="line">remote: start: missing job name</span><br><span class="line">remote: Try `start --<span class="keyword">help</span>' <span class="keyword">for</span> <span class="keyword">more</span> information.</span><br><span class="line">remote: Running .openshift/action_hooks/post_deploy</span><br><span class="line">remote: post_deploy</span><br></pre></td></tr></table></figure><br>The process is being killed anyway. This was driving me crazy, because no matter what I did the build always crashed. Then I tried SSH and run the script manually and… bam! It worked.<br><figure class="highlight groovy"><figcaption><span>Build successful when run manually from SSH session</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">build</span><br><span class="line"><span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1</span><br><span class="line"><span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime/repo</span><br><span class="line">[info] Loading project definition from <span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>project</span><br><span class="line">[info] Set current project to YAT Server (<span class="keyword">in</span> build <span class="string">file:</span><span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>)</span><br><span class="line">[debug]</span><br><span class="line">[debug] Initial source <span class="string">changes:</span></span><br><span class="line">[debug]   <span class="string">removed:</span>Set()</span><br><span class="line">[debug] 	<span class="string">added:</span> Set(<span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>src<span class="regexp">/main/</span>scala<span class="regexp">/pl/</span>apptile<span class="regexp">/yat/</span>YAT.scala)</span><br><span class="line">[debug] 	<span class="string">modified:</span> Set()</span><br><span class="line">[debug] Removed <span class="string">products:</span> Set()</span><br><span class="line">[debug] Modified external <span class="string">sources:</span> Set()</span><br><span class="line">[debug] Modified binary <span class="string">dependencies:</span> Set()</span><br><span class="line">[debug] Initial directly invalidated <span class="string">sources:</span> Set(<span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>src<span class="regexp">/main/</span>scala<span class="regexp">/pl/</span>apptile<span class="regexp">/yat/</span>YAT.scala)</span><br><span class="line">[debug]</span><br><span class="line">[debug] Sources indirectly invalidated <span class="string">by:</span></span><br><span class="line">[debug] 	<span class="string">product:</span> Set()</span><br><span class="line">[debug] 	binary <span class="string">dep:</span> Set()</span><br><span class="line">[debug] 	external <span class="string">source:</span> Set()</span><br><span class="line">[debug] Initially <span class="string">invalidated:</span> Set(<span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>src<span class="regexp">/main/</span>scala<span class="regexp">/pl/</span>apptile<span class="regexp">/yat/</span>YAT.scala)</span><br><span class="line">[debug] Recompiling all <span class="number">1</span> <span class="string">sources:</span> invalidated sources (<span class="number">1</span>) exceeded <span class="number">50.0</span>% of all sources</span><br><span class="line">[info] Compiling <span class="number">1</span> Scala source to <span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>target<span class="regexp">/scala-2.10/</span>classes...</span><br><span class="line">[debug] Running cached compiler <span class="number">12</span>a6774, interfacing (CompilerInterface) with Scala compiler version <span class="number">2.10</span>.0</span><br><span class="line">[debug] Calling Scala compiler with arguments  (CompilerInterface):</span><br><span class="line">[debug] 	-d</span><br><span class="line">[debug] 	<span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>target<span class="regexp">/scala-2.10/</span>classes</span><br><span class="line">[debug] 	-bootclasspath</span><br><span class="line">[debug] 	<span class="regexp">/usr/</span>lib<span class="regexp">/jvm/</span>java-<span class="number">1.7</span>.0-openjdk-<span class="number">1.7</span>.0.9<span class="regexp">/jre/</span>lib<span class="regexp">/resources.jar:/</span>usr<span class="regexp">/lib/</span>jvm<span class="regexp">/java-1.7.0-openjdk-1.7.0.9/</span>jre<span class="regexp">/lib/</span>rt.<span class="string">jar:</span><span class="regexp">/usr/</span>lib<span class="regexp">/jvm/</span>java-<span class="number">1.7</span>.0-openjdk-<span class="number">1.7</span>.0.9<span class="regexp">/jre/</span>lib<span class="regexp">/sunrsasign.jar:/</span>usr<span class="regexp">/lib/</span>jvm<span class="regexp">/java-1.7.0-openjdk-1.7.0.9/</span>jre<span class="regexp">/lib/</span>jsse.<span class="string">jar:</span><span class="regexp">/usr/</span>lib<span class="regexp">/jvm/</span>java-<span class="number">1.7</span>.0-openjdk-<span class="number">1.7</span>.0.9<span class="regexp">/jre/</span>lib<span class="regexp">/jce.jar:/</span>usr<span class="regexp">/lib/</span>jvm<span class="regexp">/java-1.7.0-openjdk-1.7.0.9/</span>jre<span class="regexp">/lib/</span>charsets.<span class="string">jar:</span><span class="regexp">/usr/</span>lib<span class="regexp">/jvm/</span>java-<span class="number">1.7</span>.0-openjdk-<span class="number">1.7</span>.0.9<span class="regexp">/jre/</span>lib<span class="regexp">/netx.jar:/</span>usr<span class="regexp">/lib/</span>jvm<span class="regexp">/java-1.7.0-openjdk-1.7.0.9/</span>jre<span class="regexp">/lib/</span>plugin.<span class="string">jar:</span><span class="regexp">/usr/</span>lib<span class="regexp">/jvm/</span>java-<span class="number">1.7</span>.0-openjdk-<span class="number">1.7</span>.0.9<span class="regexp">/jre/</span>lib<span class="regexp">/rhino.jar:/</span>usr<span class="regexp">/lib/</span>jvm<span class="regexp">/java-1.7.0-openjdk-1.7.0.9/</span>jre<span class="regexp">/lib/</span>jfr.<span class="string">jar:</span><span class="regexp">/usr/</span>lib<span class="regexp">/jvm/</span>java-<span class="number">1.7</span>.0-openjdk-<span class="number">1.7</span>.0.9<span class="regexp">/jre/</span><span class="string">classes:</span><span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>data<span class="regexp">/.sbt/</span>boot<span class="regexp">/scala-2.10.0/</span>lib/scala-library.jar</span><br><span class="line">[debug] 	-classpath</span><br><span class="line">[debug] 	<span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>target<span class="regexp">/scala-2.10/</span>classes</span><br><span class="line">[debug] Scala compilation took <span class="number">34.206682197</span> s</span><br><span class="line">[debug] Step <span class="number">2</span> changed sources and immdediate <span class="string">dependencies:</span></span><br><span class="line">[debug] 	Set(<span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>src<span class="regexp">/main/</span>scala<span class="regexp">/pl/</span>apptile<span class="regexp">/yat/</span>YAT.scala)</span><br><span class="line">[debug] Non-trivial strongly connected <span class="string">components:</span></span><br><span class="line">[debug]</span><br><span class="line">[debug] Step <span class="number">2</span> invalidated <span class="string">sources:</span></span><br><span class="line">[debug] 	Set(<span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>src<span class="regexp">/main/</span>scala<span class="regexp">/pl/</span>apptile<span class="regexp">/yat/</span>YAT.scala)</span><br><span class="line">[info] Wrote start script <span class="keyword">for</span> <span class="string">mainClass :</span>= Some(pl.apptile.yat.YAT) to <span class="regexp">/var/</span>lib<span class="regexp">/openshift/</span><span class="number">512617424382</span>ec272a0000b1<span class="regexp">/app-root/</span>runtime<span class="regexp">/repo/</span>target/start</span><br></pre></td></tr></table></figure><br>This is quite puzzling and I can’t figure out why automatic build doesn’t work. What’s worth mentioning though is that it does work when you change Scala to 2.9.2. But it’s against requirements and hence I stopped at this point, unable to continue.</p>
<h3 id="Summary">Summary</h3><p>While I was really happy that most of the things were quite easy to start with, inability to compile the sources makes it a no-no for further work, like actually starting a spray-can server. My application was a Hello World app and if this can’t compile… Sorry <a href="https://openshift.redhat.com/app/" target="_blank" rel="external">OpenShift</a>, for now I’m switching to <a href="http://www.cloudfoundry.com/" target="_blank" rel="external">CloudFoundry</a> to see how it fares.</p>

        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>


  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2013-02-12T10:30:00.000Z">
        <div class="day">12</div>
        <div class="month">Feb 2013</div>
      </time></div>
      <div class="article-tags">
        

      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2013/02/angularjs-directive-for-password-matching.html">Angular directive for password matching</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <p>Recently at <a href="http://bootstrap.softwaremill.com/#/" target="_blank" rel="external">Bootstrap</a> I was working on the profile page part. I had to introduce a simple validation of passwords - when you type in your password, you often have to repeat it. This was implemented in a few places already, however it wasn’t correct - changing the original password did not trigger validation.</p>
<p>To see how this works, just go to the <a href="http://bootstrap.softwaremill.com" target="_blank" rel="external">Bootstrap page</a> and play with the registration form’s “password” and “repeat password” inputs. All code snippets are taken from <a href="http://bootstrap.softwaremill.com/#/" target="_blank" rel="external">Bootstrap</a>.</p>
<h3 id="Requirements">Requirements</h3><p>We have two input fields and we just need to validate whether values in them are synchronized. Values entered in both these fields need to be the same, if they’re not, then display error message next to the second input field that the contents are invalid.</p>
<h3 id="Simple_approach">Simple approach</h3><p>When I started, there was something implemented already. It was a simple solution that based on the <a href="http://docs.angularjs.org/api/ng.directive:ngChange" target="_blank" rel="external">ng-change</a> directive. This directive was attached to the repeated field and every time the value changed, method checkPassword() in RegisterController was called.</p>
<figure class="highlight html"><figcaption><span>How checkPassword() was used</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"password"</span> <span class="attribute">name</span>=<span class="value">"repeatPassword"</span> <span class="attribute">id</span>=<span class="value">"repeatPassword"</span> <span class="attribute">placeholder</span>=<span class="value">"repeat password"</span> <span class="attribute">ng-model</span>=<span class="value">"user.repeatPassword"</span> <span class="attribute">ng-change</span>=<span class="value">"checkPassword()"</span> <span class="attribute">required</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>Validation in checkPassword method</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$scope.checkPassword = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    $scope.registerForm.repeatPassword.$error.dontMatch = $scope.user.password !== $scope.user.repeatPassword;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>The dontMatch error flag was then used to display error message.<br><figure class="highlight html"><figcaption><span>Using dontMatch flag to display error</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"text-error"</span> <span class="attribute">ng-show</span>=<span class="value">"registerForm.repeatPassword.$dirty &amp;&amp; registerForm.repeatPassword.$error.dontMatch"</span>&gt;</span>Passwords don't match!<span class="tag">&lt;/<span class="title">span</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>This isn’t the best solution. First of all, this only checked equity upon changing the repeated field, not the original password field. To make this work it would be required in both original and repeated fields. This also wasn’t reusable - to use it in another place, checkPassword method had to be actually copied.</p>
<h3 id="Angular_directive_to_the_rescue">Angular directive to the rescue</h3><p>Directives in AngularJS are used to create reusable components so I thought about how to use them to solve the validation problem. It was rather easy and straightforward.</p>
<figure class="highlight javascript"><figcaption><span>The repeatPassword directive</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">directives.directive(<span class="string">"repeatPassword"</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="built_in">require</span>: <span class="string">"ngModel"</span>,</span><br><span class="line">        link: <span class="function"><span class="keyword">function</span><span class="params">(scope, elem, attrs, ctrl)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> otherInput = elem.inheritedData(<span class="string">"$formController"</span>)[attrs.repeatPassword];</span><br><span class="line"></span><br><span class="line">            ctrl.$parsers.push(<span class="function"><span class="keyword">function</span><span class="params">(value)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(value === otherInput.$viewValue) &#123;</span><br><span class="line">                    ctrl.$setValidity(<span class="string">"repeat"</span>, <span class="literal">true</span>);</span><br><span class="line">                    <span class="keyword">return</span> value;</span><br><span class="line">                &#125;</span><br><span class="line">                ctrl.$setValidity(<span class="string">"repeat"</span>, <span class="literal">false</span>);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            otherInput.$parsers.push(<span class="function"><span class="keyword">function</span><span class="params">(value)</span> </span>&#123;</span><br><span class="line">                ctrl.$setValidity(<span class="string">"repeat"</span>, value === ctrl.$viewValue);</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>Using repeatPassword directive</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"password"</span> <span class="attribute">name</span>=<span class="value">"repeatPassword"</span> <span class="attribute">id</span>=<span class="value">"repeatPassword"</span> <span class="attribute">placeholder</span>=<span class="value">"repeat password"</span> <span class="attribute">ng-model</span>=<span class="value">"user.repeatPassword"</span> <span class="attribute">repeat-password</span>=<span class="value">"password"</span> <span class="attribute">required</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>At first I was trying to attach $parser function to just the element the directive was attached to. But this didn’t work, because when I was comparing to the value stored in controller the results not always were correct. The reason for this is that invalid values are not passed to controller, and so when one value was invalid, it wasn’t present in controller, and directive failed. As you can see, the trick is to attach $parsers to each control that requires syncing. This took me some time to figure out, but for now it works quite nice.</p>
<h3 id="Summary">Summary</h3><p>Angular directives are quite nice. They can be used to create reusable components and in this case, I created something that was automatically usable in three places, without the need to writing any controller code. Moreover, this directive is not only for passwords - rename that to stringsMatch and you get a nice directive that checks if you string values are in sync. Neat!</p>
<p>This change has been introduced in <a href="http://bootstrap.softwaremill.com/#/" target="_blank" rel="external">Bootstrap</a> in <a href="https://github.com/softwaremill/bootstrap/commit/515d289ddea2159b8c3eaa956cdfb658898b5358" target="_blank" rel="external">this commit</a>.</p>

        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>


  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2013-02-11T07:06:00.000Z">
        <div class="day">11</div>
        <div class="month">Feb 2013</div>
      </time></div>
      <div class="article-tags">
        

      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2013/02/my-first-month-at-softwaremill.html">My first month at SoftwareMill</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <p>The year 2012 was a year of change to me. First I was moved to a new team in CGM Poland. Things were nice at first, but after a while I lost all my motivation to work. It was time to change the organization and so I applied to a company called <a href="http://www.softwaremill.com" target="_blank" rel="external">SoftwareMill</a>.<br>Why them? Trully a coincidence. I was browsing some stuff on LinkedIn and I stumbled upon their job posting and I got intrigued by the fact that they mentioned possibility to work from home. As it turned out, the whole team is distributed! But then I took a closer look at the company and noticed that on SoftwareMill website there’s a <a href="http://softwaremill.com/why-softwaremill/our-team" target="_blank" rel="external">section about developers</a>. Browsing short descriptions of those who worked there I thought that it was a very good company to work at. So I applied in August. It took a longer while to finish the recruitment process (I wasn’t accepted at first), but I finally started work at SoftwareMill on 2nd January 2013.</p>
<p>Now a month has passed and I have to say that I’m very happy I was given the chance. Not only have I met some brilliant people but it was also a great cultural change for me: from big company, corporation, to a smaller entity with more focus on single developers.</p>
<p>This experience is quite pleasant. Frequent code reviews is something I often missed in my previous jobs but here I have them almost every push to Git repo. That’s reassuring, as any mistake I make may be quickly recognized by someone else, but I think I don’t have to stress out how important code reviews are :)</p>
<p>The next thing I’d like to mention is the Scrum/Chrum meetings. Every team has a Scrum sometime before 10:00. It’s your normal Scrum meeting where you answer the three questions. Then is the Chrum meeting. Since the team is distributed, we don’t see each other normally, so at 10:00 we have a video meeting where we answer additional, fourth question. This question can be anything - from what was your yesterday’s dinner to how does your surrounding look like at the moment. This is really quite fun meeting and most importantly it’s self organizing. There is no specific order at which people speak out but we usually end the meeting around 10:20. When the official meeting is over we are free to discuss about anything.</p>
<p>Working from home was something I always wanted to try and now I have the chance. I was affraid though that some responsibilities might take over my work (like cooking dinner, for example) but fortunately that’s not the case. I think I adapted pretty quickly to working from home, <a href="http://dilbert.com/strips/comic/2013-02-10/" target="_blank" rel="external">despite many distractions</a>. There are occasional problems, like having a sick kid at home, but other than that, distractions can be avoided. It’s also worth noting that remote work does not equal to working from home, which I hope to prove sometime soon :) </p>
<p>For now I’m developing this open source project called <a href="https://github.com/softwaremill/bootstrap" target="_blank" rel="external">SML Bootstrap</a> and while it’s nothing too big, it helps me to familiarize with how things work at SoftwareMill. I also encourage you to check this project out - it’s quite simple, but can be useful if you start your project with Scala and AngularJS.</p>
<p>As a last note I’ll just mention that I was given this Macbook Pro to work with ;) While I never agreed with how Apple works, but I have to admit that the quality of build of this machine is just superb.</p>

        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>


  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2012-12-12T12:06:00.000Z">
        <div class="day">12</div>
        <div class="month">Dec 2012</div>
      </time></div>
      <div class="article-tags">
        

      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2012/12/scala-and-android-asynctask-implementation-problem.html">Scala and Android: AsyncTask implementation problem</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <p>So I recently started some really simple Scala development for Android. However because I’m a very lucky person, I stumbled upon my first problem the very first moment I tried doing something nice.</p>
<p>There is a neat way for doing things in Android with AsyncTasks - this cool utility abstracts away the need for creation and management of threads for invoking stuff that would block UI thread. For more info just go to AsyncTask documentation.</p>
<p>So I tried doing something with this cool AsyncTask and here’s the class definition:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class ObtainRequestTokenTask() extends AsyncTask[String, Void, String] &#123;</span><br><span class="line">...</span><br><span class="line">override protected def doInBackground(p1: String*): String = &#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>The major problem here is that this thing compiles. Running this on Android emulator I got an exception suggesting that doInBackground is not implemented (it’s abstract in AsyncTask)… So where’s the problem?</p>
<p>Googling about this I found <a href="https://issues.scala-lang.org/browse/SI-1459" target="_blank" rel="external">this bug</a>. I won’t go into detail, however to make this code work you have to actually change the signature of doInBackground. Instead of String input, you need AnyRef and just cast params to the desired class.</p>
<p>For me this now looks something like this:<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class ObtainRequestTokenTask() extends AsyncTask[AnyRef, Void, String] &#123;</span><br><span class="line">...</span><br><span class="line">override protected def doInBackground(p1: AnyRef*): String = &#123;</span><br><span class="line">p1.head.asInstanceOf[String]</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>


  <article class="post">
  <div class="pure-g">

    <!-- article: meta -->
    <div class="pure-u-1-12 article-meta">
      <div class="date"><time datetime="2012-10-29T12:02:00.000Z">
        <div class="day">29</div>
        <div class="month">Oct 2012</div>
      </time></div>
      <div class="article-tags">
        

      </div>
    </div>

    <!-- article: main -->
    <div class="pure-u-11-12">
      <header><div class="article-title">
        
  
    <h1 class="title"><a href="/2012/10/warsjawa-2012.html">Warsjawa 2012</a></h1>
  

      </div></header>
      <div class="article-entry">
        
          <p>I didn’t attent any conference for the past 18 months. Last time I was on one was when I was sent to eye-opening meeting with Greg Young. Recently a friend of mine suggested that we should go to <a href="http://warszawa.jug.pl/warsjawa-2012" target="_blank" rel="external">Warsjawa 2012</a> conference as it’s free and relatively close to Lublin.</p>
<p>We decided to sign up for a workshop called ‘One day with a difficult client’ that was lead by guys from <a href="http://softwaremill.com/" target="_blank" rel="external">SoftwareMill</a>. The idea of the workshop was to show attendees some common problems people face when working with their clients. Even though I don’t work directly with our client every day I read a few things here and there how they can be PITA and I had some expectations regarding this workshop. It turned out great and here’s how it went.</p>
<p>The whole workshop began with a short, but fun, game which helped every attendee remember other’s names. This game is very simple: just say your name and make up some kind of symbol (V sign, finger on your mouth, anything) and the person after you has to repeat EVERY name and EVERY symbol before. There were 13 attendees and 3 leaders so after 16 rounds we pretty much knew every name. Very fun way of introducing a group of people to each other, and very efficient at that.</p>
<p>After that we were split into three groups and each group was given a contract to build a space capsule. We were presented with some stuff that we could use (scissors, paper, glue, boxes, foil - you get the picture) and we had some time to think about the contract. The whole game was to take around 1,5 hours and it was split into a few 15-20 minute sprints. After each sprint our client would come and look at what we’ve done and answer questions.</p>
<p>When the time run out we were taken to the launch site - the capsule had to actually fly! The clients were mostly happy and we mostly delivered what they wanted. Or did we? That was the whole point of the workshop. We started out with a contract for a space capsule and ended up with a prototype model that instead of flying out to space was to fly just three meters straight from the launcher, which wasn’t a rocket booster but a simple slingshot.</p>
<p>At the end, we were doing retrospectives in teams and shared our experiences with others. Some teams had problems other didn’t and guys from SoftwareMill told us what we did good and where our attention should be next time. I can’t tell for other teams, but our team didn’t have most of the problems, and we also did the best looking capsule! Unfortunately we did one thing wrong - we emphasized one aspect of the capsule without much regard to another which resulted in the best looking and most secure capsule that… didn’t fly.</p>
<p>There were a few things I didn’t like though. The difficult client didn’t appear that difficult after all. I expected the client to be a little more aggresive, inconsistent (the ‘client’ had three representatives and on each meeting another representative was present, and mostly agreed with his/her colegues) and impatient. But apparently some previous groups had problems already and this workshop was meant to be fun and not hardcore :) I can live with that.</p>
<p>Another ‘thing’ was that shortly after the workshop was over, everyone was gone. We couldn’t talk more about what happened and share more experiences, not only regarding workshops. I’d definately fix that next time because for me this was the worst thing to happen.</p>
<p>Overall, it was one of the best days lately. Lots of laughter, lots of good experience and lots of great people to work with. I think I will attend Warsjawa 2013 :)</p>

        
      </div>
      <footer><div class="article-comment">
        

      </div></footer>
    </div>
  </div>
</article>



<div class="pure-g bitpager">
  <div class="pure-u-1-12"></div>
  <div class="pure-u-1-4">
    
  </div>
  <div class="pure-u-5-12"></div>
  <div class="pure-u-1-4">
    
    <a href="/page/2/" class="pull-right">next &rarr;</a>
    
  </div>
</div>

  </div>
  </div>
  <footer id="footer">
    <div class="wrap">
  <div class="inner" style="text-align: center">
    
    &copy; 2015 Piotr Buda All Rights Reserved
    

    / <a href="https://github.com/kywk/hexo-theme-biture">biture</a> for <a href="http://zespia.tw/hexo/">hexo</a>
    / developed by <a href="http://kywk.github.io/moco/">MooCow (kywk)</a>.
  </div>
</div>

  </footer>
<!-- Le javascript -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-62603909-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<!-- Responsive menu -->
<script>
$(document).ready(function() {
  $("#menu-toggle").click(function(event) {
    event.preventDefault();
    if ($(this).hasClass("isShow")) {
      $("#header").css({position: "fixed"});
      $("ul.nav-menu").hide();
      $(this).removeClass("isShow");
    } else {
      $("#header").css({position: "static"});
      $("ul.nav-menu").show();
      $("html, body").scrollTop(0);
      $(this).addClass("isShow");
    }
    return false;
  });

  $(window).resize(function() {
    if ($(window).width() > 700) {
      $("ul.nav-menu").removeAttr('style');
    }
  });

});
</script>



<script type="text/javascript">
var disqus_shortname = 'piotrbuda';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>




<link rel="stylesheet" href="/package/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="/package/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<script type="text/javascript">
(function($){
  $(".fancybox").fancybox();
  $(".various").fancybox({
    maxWidth  : 800,
    maxHeight : 600,
    fitToView : false,
    width   : '70%',
    height    : '70%',
    autoSize  : true,
    closeClick  : false,
    openEffect  : 'none',
    closeEffect : 'none'
  });
})(jQuery);
</script>


</body>
</html>
